<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Index (obi.Obi.Index)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">obi</a> &#x00BB; <a href="../index.html">Obi</a> &#x00BB; Index</nav><h1>Module <code>Obi.Index</code></h1></header><div class="doc"><p>Index of all the opam2 builds. The <code>Index</code> module contains types for the opam2 bulk build results.</p></div><dl><dt class="spec type" id="type-deps"><a href="#type-deps" class="anchor"></a><code><span class="keyword">type </span>deps</code><code><span class="keyword"> = </span>(string<span class="keyword"> * </span>string<span class="keyword"> * </span>[ `Fail<span class="keyword"> | </span>`Ok<span class="keyword"> | </span>`Skipped ]) list</code><code></code></dt><dd><p><code>deps</code> is a list of package dependencies, where each entry is a tuple of <code>name, version, status</code></p></dd></dl><article><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-deps_of_sexp"><a href="#val-deps_of_sexp" class="anchor"></a><code><span class="keyword">val </span>deps_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#8209;&gt;</span> <a href="index.html#type-deps">deps</a></code></dt><dt class="spec value" id="val-sexp_of_deps"><a href="#val-sexp_of_deps" class="anchor"></a><code><span class="keyword">val </span>sexp_of_deps : <a href="index.html#type-deps">deps</a> <span>&#8209;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt></dl></details></div></div></article><dl><dt class="spec type" id="type-result"><a href="#type-result" class="anchor"></a><code><span class="keyword">type </span>result</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-result.Ok" class="anchored"><td class="def constructor"><a href="#type-result.Ok" class="anchor"></a><code><span class="keyword">| </span></code><code>`Ok</code></td></tr><tr id="type-result.Fail" class="anchored"><td class="def constructor"><a href="#type-result.Fail" class="anchor"></a><code><span class="keyword">| </span></code><code>`Fail<span class="keyword"> of </span>int<span class="keyword"> * </span><a href="index.html#type-deps">deps</a></code></td></tr><tr id="type-result.Depfail" class="anchored"><td class="def constructor"><a href="#type-result.Depfail" class="anchor"></a><code><span class="keyword">| </span></code><code>`Depfail<span class="keyword"> of </span><a href="index.html#type-deps">deps</a></code></td></tr><tr id="type-result.Uninstallable" class="anchored"><td class="def constructor"><a href="#type-result.Uninstallable" class="anchor"></a><code><span class="keyword">| </span></code><code>`Uninstallable<span class="keyword"> of </span>string list</code></td></tr><tr id="type-result.No_sources" class="anchored"><td class="def constructor"><a href="#type-result.No_sources" class="anchor"></a><code><span class="keyword">| </span></code><code>`No_sources<span class="keyword"> of </span>string list</code></td></tr><tr id="type-result.Solver_failure" class="anchored"><td class="def constructor"><a href="#type-result.Solver_failure" class="anchor"></a><code><span class="keyword">| </span></code><code>`Solver_failure</code></td></tr></table><code> ]</code><code></code></dt><dd><p><code>result</code> represents the exit result of an <code>opam</code> invocation. The raw exit codes are parsed to look for special opam exit codes, which indicate errors such as the internal solver failing to find a result.</p></dd></dl><article><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-result_of_sexp"><a href="#val-result_of_sexp" class="anchor"></a><code><span class="keyword">val </span>result_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#8209;&gt;</span> <a href="index.html#type-result">result</a></code></dt><dt class="spec value" id="val-__result_of_sexp__"><a href="#val-__result_of_sexp__" class="anchor"></a><code><span class="keyword">val </span>__result_of_sexp__ : Ppx_sexp_conv_lib.Sexp.t <span>&#8209;&gt;</span> <a href="index.html#type-result">result</a></code></dt><dt class="spec value" id="val-sexp_of_result"><a href="#val-sexp_of_result" class="anchor"></a><code><span class="keyword">val </span>sexp_of_result : <a href="index.html#type-result">result</a> <span>&#8209;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt></dl></details></div></div></article><dl><dt class="spec value" id="val-pp_result"><a href="#val-pp_result" class="anchor"></a><code><span class="keyword">val </span>pp_result : Format.formatter <span>&#8209;&gt;</span> <a href="index.html#type-result">result</a> <span>&#8209;&gt;</span> unit</code></dt><dd><p><code>pp_result ppf result</code> will print a human-readable result to formatter <code>ppf</code></p></dd></dl><dl><dt class="spec type" id="type-params"><a href="#type-params" class="anchor"></a><code><span class="keyword">type </span>params</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-params.arch" class="anchored"><td class="def field"><a href="#type-params.arch" class="anchor"></a><code>arch : Dockerfile_distro.arch;</code></td><td class="doc"><p>CPU architecture</p></td></tr><tr id="type-params.distro" class="anchored"><td class="def field"><a href="#type-params.distro" class="anchor"></a><code>distro : Dockerfile_distro.t;</code></td><td class="doc"><p>Operating system distribution</p></td></tr><tr id="type-params.ov" class="anchored"><td class="def field"><a href="#type-params.ov" class="anchor"></a><code>ov : Ocaml_version.t;</code></td><td class="doc"><p>OCaml compiler version</p></td></tr></table><code>}</code><code></code></dt><dd><p><code>params</code> represents some of the build parameters that opam packages are tested against. These include the CPU architecture, OS distribution and OCaml compiler version.</p></dd></dl><article><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-params_of_sexp"><a href="#val-params_of_sexp" class="anchor"></a><code><span class="keyword">val </span>params_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#8209;&gt;</span> <a href="index.html#type-params">params</a></code></dt><dt class="spec value" id="val-sexp_of_params"><a href="#val-sexp_of_params" class="anchor"></a><code><span class="keyword">val </span>sexp_of_params : <a href="index.html#type-params">params</a> <span>&#8209;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt></dl></details></div></div></article><dl><dt class="spec type" id="type-metadata"><a href="#type-metadata" class="anchor"></a><code><span class="keyword">type </span>metadata</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-metadata.rev" class="anchored"><td class="def field"><a href="#type-metadata.rev" class="anchor"></a><code>rev : string;</code></td><td class="doc"><p>opam-repository git revision hash that this run was built against</p></td></tr><tr id="type-metadata.params" class="anchored"><td class="def field"><a href="#type-metadata.params" class="anchor"></a><code>params : <a href="index.html#type-params">params</a>;</code></td><td class="doc"><p>build <a href="index.html#type-params"><code>params</code></a> for this run</p></td></tr><tr id="type-metadata.build_result" class="anchored"><td class="def field"><a href="#type-metadata.build_result" class="anchor"></a><code>build_result : <a href="index.html#type-result">result</a>;</code></td><td class="doc"><p>result of the execution of this set of parameters</p></td></tr><tr id="type-metadata.duration" class="anchored"><td class="def field"><a href="#type-metadata.duration" class="anchor"></a><code>duration : float;</code></td><td class="doc"><p>wall clock time of the duration of the build in Unix seconds</p></td></tr><tr id="type-metadata.log" class="anchored"><td class="def field"><a href="#type-metadata.log" class="anchor"></a><code>log : string list;</code></td><td class="doc"><p>list of log lines. This is blank unless there is an error</p></td></tr></table><code>}</code><code></code></dt><dd><p><code>metadata</code> contains the results and parameters for a single build run of a package and version.</p></dd></dl><article><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-metadata_of_sexp"><a href="#val-metadata_of_sexp" class="anchor"></a><code><span class="keyword">val </span>metadata_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#8209;&gt;</span> <a href="index.html#type-metadata">metadata</a></code></dt><dt class="spec value" id="val-sexp_of_metadata"><a href="#val-sexp_of_metadata" class="anchor"></a><code><span class="keyword">val </span>sexp_of_metadata : <a href="index.html#type-metadata">metadata</a> <span>&#8209;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt></dl></details></div></div></article><dl><dt class="spec type" id="type-pkg"><a href="#type-pkg" class="anchor"></a><code><span class="keyword">type </span>pkg</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-pkg.name" class="anchored"><td class="def field"><a href="#type-pkg.name" class="anchor"></a><code>name : string;</code></td><td class="doc"><p>opam package name</p></td></tr><tr id="type-pkg.maintainers" class="anchored"><td class="def field"><a href="#type-pkg.maintainers" class="anchor"></a><code><span class="keyword">mutable </span>maintainers : string list;</code></td><td class="doc"><p>list of maintainers associated with this package. As a heuristic, all of the maintainers listed for all versions are bundled together here for simplicity.</p></td></tr><tr id="type-pkg.tags" class="anchored"><td class="def field"><a href="#type-pkg.tags" class="anchor"></a><code><span class="keyword">mutable </span>tags : string list;</code></td><td class="doc"><p>list of tags associated with this package. As a heuristic, all of the tags listed of all versions are bundled together here for simplicity.</p></td></tr><tr id="type-pkg.versions" class="anchored"><td class="def field"><a href="#type-pkg.versions" class="anchor"></a><code><span class="keyword">mutable </span>versions : (string<span class="keyword"> * </span><a href="index.html#type-metadata">metadata</a> list) list;</code></td><td class="doc"><p>list of a tuple of opam package version and the list of build results. There is a list of results since there are usually multiple different runs for every version, to test it against different compiler and CPU/OS combinations.</p></td></tr></table><code>}</code><code></code></dt><dd><p><code>pkg</code> collects all the metadata for all versions of a given opam package.</p></dd></dl><article><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-pkg_of_sexp"><a href="#val-pkg_of_sexp" class="anchor"></a><code><span class="keyword">val </span>pkg_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#8209;&gt;</span> <a href="index.html#type-pkg">pkg</a></code></dt><dt class="spec value" id="val-sexp_of_pkg"><a href="#val-sexp_of_pkg" class="anchor"></a><code><span class="keyword">val </span>sexp_of_pkg : <a href="index.html#type-pkg">pkg</a> <span>&#8209;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt></dl></details></div></div></article><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-t.version" class="anchored"><td class="def field"><a href="#type-t.version" class="anchor"></a><code>version : int;</code></td></tr><tr id="type-t.packages" class="anchored"><td class="def field"><a href="#type-t.packages" class="anchor"></a><code>packages : <a href="index.html#type-pkg">pkg</a> list;</code></td></tr></table><code>}</code><code></code></dt><dd><p><code>t</code> contains a version number of the metadata system, which is set to <a href="index.html#val-current_version"><code>current_version</code></a> for the latest builds. Older clients can parse the sexpression to determine if they need to upgrade for a newer format. The <code>CHANGES.md</code> file in the Obi source code repository tracks metadata version number bumps.</p></dd></dl><article><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-t_of_sexp"><a href="#val-t_of_sexp" class="anchor"></a><code><span class="keyword">val </span>t_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span class="keyword">val </span>sexp_of_t : <a href="index.html#type-t">t</a> <span>&#8209;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt></dl></details></div></div></article><dl><dt class="spec value" id="val-current_version"><a href="#val-current_version" class="anchor"></a><code><span class="keyword">val </span>current_version : int</code></dt><dd><p><code>current_version</code> is a monotonically increasing number for the version of Obi in use.</p></dd></dl><dl><dt class="spec type" id="type-maintainers"><a href="#type-maintainers" class="anchor"></a><code><span class="keyword">type </span>maintainers</code><code><span class="keyword"> = </span>(string<span class="keyword"> * </span>string list) list</code><code></code></dt><dd><p><code>maintainers</code> is an association list of the package name (including version string) to the list of maintainers registered for that package. As a heuristic, all of the maintainers listed for all versions are bundled here for simplicity.</p></dd></dl><article><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-maintainers_of_sexp"><a href="#val-maintainers_of_sexp" class="anchor"></a><code><span class="keyword">val </span>maintainers_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#8209;&gt;</span> <a href="index.html#type-maintainers">maintainers</a></code></dt><dt class="spec value" id="val-sexp_of_maintainers"><a href="#val-sexp_of_maintainers" class="anchor"></a><code><span class="keyword">val </span>sexp_of_maintainers : <a href="index.html#type-maintainers">maintainers</a> <span>&#8209;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt></dl></details></div></div></article><dl><dt class="spec type" id="type-tags"><a href="#type-tags" class="anchor"></a><code><span class="keyword">type </span>tags</code><code><span class="keyword"> = </span>(string<span class="keyword"> * </span>string list) list</code><code></code></dt><dd><p><code>tags</code> is an association list of the package name (including version string) to the list of tags registered for that package. As a heuristic, all of the tags listed for all versions are bundled here for simplicity.</p></dd></dl><article><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-tags_of_sexp"><a href="#val-tags_of_sexp" class="anchor"></a><code><span class="keyword">val </span>tags_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#8209;&gt;</span> <a href="index.html#type-tags">tags</a></code></dt><dt class="spec value" id="val-sexp_of_tags"><a href="#val-sexp_of_tags" class="anchor"></a><code><span class="keyword">val </span>sexp_of_tags : <a href="index.html#type-tags">tags</a> <span>&#8209;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt></dl></details></div></div></article></div></body></html>